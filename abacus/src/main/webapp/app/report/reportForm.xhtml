<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	template="/WEB-INF/content/template/simple.xhtml"
	xmlns:abc="http://www.abacus.com/abc">

	<ui:define name="content">
		<o:importConstants type="org.abacus.definition.shared.constant.EnumList.JRList" />
		<o:importConstants type="org.abacus.definition.shared.constant.EnumList.JRExport" />
				
		<style> .topAligned { vertical-align: top;} </style>
			
		<h:form id="reportForm">

			<p:selectOneMenu value="#{jasperReportBean.jrListSelected}" 
			 	style="width:145px" rendered="true">
				<f:selectItems value="#{JRList}"
					var="reportEnum" itemLabel="#{reportEnum.description}"
					itemValue="#{reportEnum}" />
				<p:ajax event="change" update=":reportForm"
					listener="#{jasperReportBean.reportListener}"
					process="@this" />
			</p:selectOneMenu>

			<p:selectOneMenu value="#{jasperReportBean.jrExportSelected}" 
			 	style="width:145px" rendered="true">
				<f:selectItems value="#{JRExport}"
					var="exportEnum" itemLabel="#{exportEnum.description}"
					itemValue="#{reportEnum}" />
				<p:ajax event="change" update=":reportForm"
					listener="#{jasperReportBean.reportListener}"
					process="@this" />
			</p:selectOneMenu>
							
			<h:commandButton value="Open PDF" 
				action="${jasperReportBean.downloadReport(jasperReportBean.jrListSelected, jasperReportBean.jrExportSelected)}">
			</h:commandButton>
			
    		<h:commandLink value="Download PDF" action="${jasperReportBean.downloadReport(jasperReportBean.jrListSelected, jasperReportBean.jrExportSelected)}" target="_blank" />

		</h:form>
	
	</ui:define>
	
	<ui:define name="model">

		<o:importConstants
			type="org.abacus.definition.shared.constant.EnumList.DefTypeEnum" />
				
	</ui:define>
	

</ui:composition>
