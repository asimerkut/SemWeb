<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/WEB-INF/content/template/simple.xhtml">

	<ui:define name="content">

		<style>
.topAligned {
	vertical-align: top;
}
</style>

		<h:panelGrid id="typeGrid" columns="2" cellpadding="4" cellspacing="4"
			columnClasses="topAligned,topAligned">

			<h:panelGrid columns="1" style="width:400px">
				<h:form id="typeForm">
					<p:panel header="Grup">
						<h:panelGrid columns="2" cellspacing="4">
							<h:outputText value="Grup" />
							<p:selectOneMenu value="#{definitionViewBean.selectedGroupEnum}"
								converter="enumEntitiyConverter" style="width:145px">
								<f:selectItems value="#{definitionViewBean.groupEnums}"
									var="groupEnum" itemLabel="#{groupEnum.description}"
									itemValue="#{groupEnum}" />
								<p:ajax event="change" update=":typeGrid"
									listener="#{definitionViewBean.selectedGroupChanged}"
									process="@this" />
							</p:selectOneMenu>

							<h:outputLabel value="Kod:" />
							<p:inputText value="#{definitionViewBean.selType.id}" disabled="true"
								readonly="true" required="true"
								requiredMessage="Type.Code Bos olamaz"
								validatorMessage="Type.Code" />

							<h:outputLabel value="Ad:" />
							<p:inputText value="#{definitionViewBean.selType.name}"
								required="true" requiredMessage="Type.Ack Bos olamaz"
								validatorMessage="Type.Ack" />

						</h:panelGrid>
						<f:facet name="footer">
							<p:commandButton id="saveType" ajax="true" value="Guncelle"
								actionListener="#{definitionViewBean.saveOrUpdateType}" />
						</f:facet>

					</p:panel>
				</h:form>



				<p:dataTable id="typeTable" var="selType"
					value="#{definitionViewBean.typeList}"
					selection="#{definitionViewBean.selType}"
					emptyMessage="Kayit Bulanamadi" selectionMode="single"
					paginator="true" paginatorPosition="bottom" rowKey="#{selType.id}"
					rows="10" resizableColumns="true" style="width:100%">

					<p:ajax event="rowSelect" update=":typeForm :valForm"
						listener="#{definitionViewBean.setCurrentType}">
					</p:ajax>

					<p:column headerText="Kod">  
            					#{selType.id}  
        					</p:column>

					<p:column headerText="Aciklama">  
            					#{selType.name}  
        					</p:column>

					<ui:remove>
						<p:column width="120">
							<f:facet name="header">
								<h:outputLabel value="Aciklama" />
							</f:facet>
							<h:outputLabel value="#{selType.ack}" />
						</p:column>
					</ui:remove>
				</p:dataTable>
			</h:panelGrid>

			<h:panelGrid columns="1" style="width:800px">

				<h:form id="valForm">
					<p:panel header="Deger">

						<h:panelGrid id="valGrid" columns="2" cellpadding="4"
							cellspacing="4">
							<h:outputLabel value="Kod:" />
							<p:inputText value="#{definitionViewBean.selVal.code}"
								required="true" requiredMessage="Val.Code Bos olamaz"
								validatorMessage="Val.Code" />

							<h:outputLabel value="Ad:" />
							<p:inputText value="#{definitionViewBean.selVal.name}"
								required="true" requiredMessage="Val.Ack Bos olamaz"
								validatorMessage="Val.Ack" />

						</h:panelGrid>
						<f:facet name="footer">
							<p:commandButton id="saveVal" update=":valForm" ajax="true"
								value="#{definitionViewBean.selVal.id == null ? 'Kaydet' : 'Guncelle'}"
								actionListener="#{definitionViewBean.saveOrUpdateVal}" />
							<p:commandButton id="clearVal" process="@this" ajax="true"
								update=":valForm"
								value="#{definitionViewBean.selVal.id == null ? 'Temizle' : 'Yeni Kayit'}"
								actionListener="#{definitionViewBean.clearVal}">
								<p:resetInput target=":valForm:valPanel" />
							</p:commandButton>
						</f:facet>


					</p:panel>
				</h:form>



				<p:treeTable value="#{definitionViewBean.rootNode}" var="defValDTO"
					selectionMode="single" selection="#{definitionViewBean.selNode}"
					resizableColumns="true">
					
					<p:ajax event="select"
						listener="#{definitionViewBean.onNodeSelect}" update=":valForm" />
					<f:facet name="header">valTree</f:facet>
					<p:column>
						<f:facet name="header">Kod</f:facet>
						<h:outputText value="#{defValDTO.code}" />
					</p:column>
					<p:column>
						<f:facet name="header">Ack</f:facet>
						<h:outputText value="#{defValDTO.name}" />
					</p:column>
				</p:treeTable>

			</h:panelGrid>



		</h:panelGrid>

	</ui:define>

</ui:composition>
