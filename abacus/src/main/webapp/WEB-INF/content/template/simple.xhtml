<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:sec="http://www.springframework.org/security/tags">


<f:view contentType="text/html">
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>#{lbl.projectTitle} - #{lbl.projectDescription}</title>

		<h:outputStylesheet library="default" name="css/style.css" />

		<link href='http://fonts.googleapis.com/css?family=Raleway:500'
			rel='stylesheet' type='text/css' />

	</h:head>
	<h:body style="width:1200px;margin:0 auto">



		<h:form>
			<p:menubar style="margin:5px auto;">
				<p:submenu label="Sistem Yonetimi">
				
					<p:submenu label="Guvenlik" rendered="#{sec:areAnyGranted('AUTH_SECURITY')}">
						<p:menuitem value="Kullanici Tanimlari"
							url="/app/user/usermanager.abc"/>
						<p:menuitem value="Grup Tanimlari"
							url="/app/user/rolemanager.abc"/>
					</p:submenu>
				
					<p:submenu label="Organizasyon" rendered="#{sec:areAnyGranted('AUTH_ORGANIZATION')}">
						<p:menuitem value="Sirket Tanimlari"
							url="/app/organization/orgmanager.abc"/>
					</p:submenu>
						
					<p:submenu label="Tanimlar" rendered="#{sec:areAnyGranted('AUTH_DEFINITION')}">
						<p:menuitem value="Paremetre Tanimlari"
							url="/app/definition/defmanager.abc?type=p"/>
						<p:menuitem value="Durum Tanimlari"
							url="/app/definition/defmanager.abc?type=s"/>
						<p:menuitem value="Gorev Tanimlari"
							url="/app/definition/defmanager.abc?type=t"/>
						<p:menuitem value="Kod Tanimlari"
							url="/app/definition/defmanager.abc?type=v"/>
					</p:submenu>

				</p:submenu>

				<p:submenu label="Tanimlar" rendered="#{sec:areAnyGranted('AUTH_NONE')}">
						<p:menuitem value="Birim Tanimlari"
							url="/app/index.abc?faces-redirect=true"/>
						<p:menuitem value="Malzeme Tanimlari"
							url="/app/index.abc?faces-redirect=true"/>
						<p:menuitem value="Yemek Tanimlari"
							url="/app/index.abc?faces-redirect=true"/>
						<p:menuitem value="Menu Tanimlari"
							url="/app/index.abc?faces-redirect=true"/>
				</p:submenu>

				<p:submenu label="Islemler" rendered="#{sec:areAnyGranted('AUTH_NONE')}">
						<p:menuitem value="Depo Islemleri"
							url="/app/index.abc?faces-redirect=true"/>
						<p:menuitem value="Finans Islemleri"
							url="/app/index.abc?faces-redirect=true"/>
				</p:submenu>

				<p:submenu label="Raporlar" rendered="#{sec:areAnyGranted('AUTH_NONE')}">
						<p:menuitem value="Stok RaporlarÄ±"
							url="/app/index.abc?faces-redirect=true"/>
				</p:submenu>

				<f:facet name="options">
					<h:form>
						<p:button value="Giris" href="/app/user/login.abc" icon="ui-icon-tag"
							rendered="#{empty request.remoteUser}" />

						<h:panelGrid columns="2"
							rendered="#{not empty request.remoteUser}">

							<p:selectOneMenu
								value="#{sessionInfoHelper.currentUser().selectedCompany}"
								converter="companyEntityConverter" style="width:145px">
								<f:selectItems
									value="#{sessionInfoHelper.currentUser().companies}"
									var="company" itemLabel="#{company.id}: #{company.name}"
									itemValue="#{company}" />
								<p:ajax event="change" process="@this" listener="#{sessionInfoHelper.redirect()}" />
							</p:selectOneMenu>

							<p:menuButton value="#{request.remoteUser}"
								style="text-transform:capitalize;">
								<p:menuitem value="Cikis" url="/app/logout"
									icon="ui-icon-extlink" />
							</p:menuButton>
						</h:panelGrid>
					</h:form>
				</f:facet>

			</p:menubar>
		</h:form>



		<div id="content" style="margin: 15px auto; min-height: 600px">

			<p:growl id="growl" showDetail="true" sticky="false"
				autoUpdate="true" life="3000" />

			<ui:insert name="content" />

		</div>

		<p:ajaxStatus
			style="width:54px;height:55px;position:fixed;right:5px;bottom:5px">

			<f:facet name="start">
				<h:graphicImage library="default" name="img/clock.png" />
				<img src="${request.contextPath}/app/resources/img/loading.gif" />
			</f:facet>

			<f:facet name="complete">
				<h:outputText value="" />
			</f:facet>

		</p:ajaxStatus>

	</h:body>
</f:view>


</html>
