<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:sec="http://www.springframework.org/security/tags">


<h:form>
	<p:menubar styleClass="menuStyle" >
		<p:submenu label="Sistem Yonetimi" rendered="#{sec:areAnyGranted('AUTH_SECURITY,AUTH_ORGANIZATION,AUTH_DEFINITION')}">
			<p:menuitem value="Organizasyon Tanimlari" url="/app/organization/orgmanager.abc" rendered="#{sec:areAnyGranted('AUTH_ORGANIZATION')}" />
			<p:menuitem value="Kullanici Tanimlari" url="/app/user/usermanager.abc" rendered="#{sec:areAnyGranted('AUTH_SECURITY')}"/>
			<p:menuitem value="Kullanici Gruplari" url="/app/user/rolemanager.abc" rendered="#{sec:areAnyGranted('AUTH_SECURITY')}" />			
			<p:menuitem value="Parametre Tanimlari" url="/app/definition/defmanager.abc?grp=PRM" rendered="#{sec:areAnyGranted('AUTH_DEFINITION')}"/>
			<p:menuitem value="Kod Tanimlari" url="/app/definition/defmanager.abc?grp=VAL" rendered="#{sec:areAnyGranted('AUTH_DEFINITION')}"/>
			<p:menuitem value="Hesap Tipleri" url="/app/definition/defmanager.abc?grp=ITM" rendered="#{sec:areAnyGranted('AUTH_DEFINITION')}"/>
			<p:menuitem value="Stok Hareket Tanimlari" url="/app/definition/defmanager.abc?grp=STK" />
			<p:menuitem value="Stok Birim Tanimlari" url="/app/definition/unitmanager.abc" />
			<p:menuitem value="Finans Hareket Tanimlari" url="/app/definition/defmanager.abc?grp=FIN" />
			<p:menuitem value="Firma Tanımları" url="/app/definition/defItem.abc?type=ITM_VE" />   
			<p:menuitem value="Tahsil/Ödeme Tanımları" url="/app/definition/defItem.abc?type=ITM_CA" />   
			<p:menuitem value="Müşteri Tanımları" url="/app/definition/defItem.abc?type=ITM_CU" />   
			<p:menuitem value="Personel Tanımları" url="/app/definition/defItem.abc?type=ITM_PE" />   
			<p:menuitem value="Gider Tanımları" url="/app/definition/defItem.abc?type=ITM_SR_FN" />   
		</p:submenu>

		<p:submenu label="Menu Tanimlari" rendered="#{sec:areAnyGranted('AUTH_DEFINITION')}">
			<p:menuitem value="Malzeme Tanimlari" url="/app/definition/defItem.abc?type=ITM_SR_ST&amp;class=STK_M" />   
			<p:menuitem value="Yemek Tanimlari" url="/app/definition/defItem.abc?type=ITM_SR_ST&amp;class=STK_P" />
			<p:menuitem value="Menu Tanimlari" url="/app/catering/catmenu.abc" />
		</p:submenu>

		<p:submenu label="Islemler" rendered="#{sec:areAnyGranted('AUTH_NONE')}">
			<p:menuitem value="Alış İrsaliye" url="/app/transaction/findStkDocument.abc?grp=STK&amp;typ=STK_WB" />
			<p:menuitem value="Depo İşlemleri" url="/app/transaction/findStkDocument.abc?grp=STK&amp;typ=STK_IO" />
			<p:menuitem value="Sipariş İşlemleri" url="/app/transaction/findReqDocument.abc?grp=REQ&amp;typ=REQ_IO" />
			<p:menuitem value="Karşılama İşlemleri" url="/app/transaction/findReqDocument.abc?grp=REQ&amp;typ=REQ_IO&amp;approval=true" />
			<p:separator/>
			<p:menuitem value="Alış Fatura" url="/app/transaction/findFinDocument.abc?grp=FIN&amp;typ=FIN_B" />
			<p:menuitem value="Ödemeler" url="/app/transaction/findFinDocument.abc?grp=FIN&amp;typ=FIN_P" />
			<p:menuitem value="Tahsilatlar" url="/app/transaction/findFinDocument.abc?grp=FIN&amp;typ=FIN_R" />
		</p:submenu>

		<p:submenu label="Raporlar" rendered="#{sec:areAnyGranted('AUTH_NONE')}">
			<p:menuitem value="Stok Durum Sorgula" url="/app/report/queryStkState.abc" />
			<p:menuitem value="Stok Hareket Sorgula" url="/app/report/queryStkDetail.abc" />
			<p:separator/>
			<p:menuitem value="Hesap Durum Sorgula" url="/app/report/queryFinState.abc" />
			<p:menuitem value="Hesap Hareket Sorgula" url="/app/report/queryFinDetail.abc" />
			<p:separator/>
			<p:menuitem value="Raporlar" url="/app/report/reportForm.abc" />
		</p:submenu>

		<f:facet name="options">
			<h:form>
				<p:button value="Giris" href="/app/user/login.abc" icon="ui-icon-tag" rendered="#{empty request.remoteUser}" />

				<h:panelGrid columns="3" rendered="#{not empty request.remoteUser}">
					
					<p:selectOneMenu value="#{sessionInfoHelper.currentUser().selectedOrganization}" converter="omnifaces.SelectItemsConverter" style="width:200px">
						<f:selectItems value="#{sessionInfoHelper.currentUser().organizationList}" var="organization" itemLabel="#{organization.id} - #{organization.name}" itemValue="#{organization}" />
						<p:ajax event="change" process="@this" listener="#{sessionInfoHelper.companyChanged()}" update="menu_fiscal_year_combo" />
					</p:selectOneMenu>
					
					<p:selectOneMenu id="menu_fiscal_year_combo" value="#{sessionInfoHelper.currentUser().selectedFiscalYear}" converter="omnifaces.SelectItemsConverter" style="width:200px">
						<f:selectItems value="#{sessionInfoHelper.currentUser().companyFiscalYearSet}" var="fiscalYear" itemLabel="#{fiscalYear.year}" itemValue="#{fiscalYear}" />
						<p:ajax event="change" process="@this" listener="#{sessionInfoHelper.fiscalYearChanged()}" />
					</p:selectOneMenu>

					<p:menuButton value="#{request.remoteUser}" style="text-transform:capitalize;">
						<p:menuitem value="Cikis" url="/app/logout" icon="ui-icon-extlink" />
					</p:menuButton>
				</h:panelGrid>
			</h:form>
		</f:facet>

	</p:menubar>
</h:form>

</html>
